<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TinyCC-WebUI</title>
    <link rel="stylesheet" href="/css/style.css" />
    <!-- marked.js for Markdown rendering with SRI -->
    <script
      src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"
      integrity="sha384-NNQgBjjuhtXzPmmy4gurS5X7P4uTt1DThyevz4Ua0IVK5+kazYQI1W27JHjbbxQz"
      crossorigin="anonymous"
    ></script>
    <!-- DOMPurify for XSS protection with SRI -->
    <script
      src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"
      integrity="sha384-vdScihEZCfbPnBQf+lc7LgXUdJVYyhC3yWHUW5C5P5GpHRqVnaM6HJELJxT6IqwM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-left">
          <span class="project-name" id="header-project-name">プロジェクト未選択</span>
        </div>
        <div class="header-actions">
          <button id="list-sessions-btn">セッション一覧</button>
        </div>
      </header>

      <div class="sessions-panel" id="sessions-panel" style="display: none">
        <h2>セッション一覧</h2>
        <div class="project-selector">
          <label for="project-select">プロジェクト:</label>
          <select id="project-select">
            <option value="">読み込み中...</option>
          </select>
        </div>
        <div id="sessions-list"></div>
        <button id="close-sessions-btn">閉じる</button>
      </div>

      <main>
        <div class="chat-output" id="chat-output">
          <p class="info">
            チャットを開始するには、下のテキストエリアに入力してCtrl+Enterを押してください。
          </p>
        </div>

        <div class="input-area">
          <div class="input-wrapper">
            <textarea
              id="user-input"
              placeholder="メッセージを入力... (Ctrl+Enterで送信、Enterで改行)"
              rows="3"
              maxlength="10000"
            ></textarea>
            <button id="send-btn" class="send-button" aria-label="送信">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M22 2L11 13"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M22 2L15 22L11 13L2 9L22 2Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
            <button id="stop-btn" class="stop-button" disabled aria-label="停止">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect x="4" y="4" width="12" height="12" rx="2" fill="currentColor" />
              </svg>
            </button>
          </div>
          <div class="input-footer">
            <span class="char-count" id="char-count">0 / 10000</span>
          </div>
        </div>
      </main>
    </div>

    <script type="module" src="/js/app.js"></script>
  </body>
</html>
